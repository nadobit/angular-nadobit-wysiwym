!function e(t,n,i){function o(d,l){if(!n[d]){if(!t[d]){var u="function"==typeof require&&require;if(!l&&u)return u(d,!0);if(r)return r(d,!0);throw new Error("Cannot find module '"+d+"'")}var a=n[d]={exports:{}};t[d][0].call(a.exports,function(e){var n=t[d][1][e];return o(n?n:e)},a,a.exports,e,t,n,i)}return n[d].exports}for(var r="function"==typeof require&&require,d=0;d<i.length;d++)o(i[d]);return o}({1:[function(e,t,n){angular.module("nadobit.wysiwym",["ui.bootstrap"]).directive("nbWysiwymEditor",function(){return{restrict:"E",templateUrl:"/tpl/nadobit/wysiwym-editor.html",require:"ngModel",scope:{schema:"=nbSchema"},link:function(e,t,n,i){e.rootNode=null,e.$watch("rootNode",function(t){i.$setViewValue(e.rootNode)}),e.onCreateClick=function(){e.rootNode={type:e.schema.rootType}},e.deleteNode=function(t){e.rootNode=null},i.$render=function(){e.rootNode=i.$viewValue}}}}).directive("nbWysiwymEditorNode",["$compile",function(e){var t='<nb-wysiwym-editor-node-list ng-model="node.childs"></nb-wysiwym-editor-node-list>';return{restrict:"E",templateUrl:"/tpl/nadobit/wysiwym-editor-node.html",require:"ngModel",link:function(n,i,o,r){var d=null;n.expanded=!0,n.$watch(o.nbTypeChoices,function(e){n.typeChoices=e}),n.onDeleteClick=function(){n.deleteNode(n.node)},n.deleteChilds=function(){n.node&&delete n.node.childs},n.onToggleExpandedClick=function(){n.expanded=!n.expanded},n.onAppendChildClick=function(e){angular.isArray(n.node.childs)||(n.node.childs=[]),n.node.childs.push({type:e})},n.onAddAttributeClick=function(e){angular.isObject(n.node.attributes)||(n.node.attributes={}),n.node.attributes[e]="";var t=n.availableAttributes.indexOf(e);n.availableAttributes.splice(t,1),n.hasAttributes=!0},r.$render=function(){n.node=r.$viewValue,n.type=n.schema.types[n.node.type],angular.isArray(n.type.attributes)?(o=n.node.attrs||{},n.availableAttributes=n.type.attributes.filter(function(e){return!(e in o)})):n.availableAttributes=[],n.hasAttributes=!angular.equals({},n.node.attributes)},n.$watchGroup(["expanded","node.childs"],function(o){d&&d.remove(),o[0]&&angular.isArray(o[1])&&e(t)(n.$new(),function(e,t){d=e,i.find("nb-childs-marker").after(d)})})}}}]).directive("nbWysiwymEditorNodeList",function(){return{restrict:"E",templateUrl:"/tpl/nadobit/wysiwym-editor-node-list.html",require:"ngModel",link:function(e,t,n,i){i.$render=function(){e.nodes=i.$viewValue},e.deleteNode=function(t){var n=e.nodes.indexOf(t);-1!==n&&e.nodes.splice(n,1),0===e.nodes.length&&e.deleteChilds()}}}})},{}]},{},[1]);